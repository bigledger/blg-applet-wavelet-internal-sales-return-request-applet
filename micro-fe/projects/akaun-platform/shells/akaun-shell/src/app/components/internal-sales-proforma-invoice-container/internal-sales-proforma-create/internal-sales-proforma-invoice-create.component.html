<mat-card-title class="column-title">
  <div fxLayout="row wrap" fxLayoutAlign="space-between end">
    <div>
      <button #navBtn mat-button class="blg-button-icon" matTooltip="Back" type="button"
        [disabled]="deactivateReturn$ | async" (click)="onReturn()">
        <img [ngClass]="navBtn.disabled ? 'blg-button-disabled' : null" src="../../../assets/images/backbutton.png" alt="add" width="40px" height="40px">
      </button>
      <span>
        Create Internal Proforma Invoice Order
      </span>
    </div>
    <div fxFlex="1 0 25" fxLayout="row" fxLayoutAlign="end" fxLayoutGap="5px">
      <button mat-raised-button color="primary" type="button"
      (click)="onReset()">RESET</button>
      <button mat-raised-button color="primary" type="button"
      [disabled]="disableButton()"
      (click)="onSave()">CREATE</button>
    </div>
  </div>
</mat-card-title>
<mat-tab-group mat-stretch-tabs [dynamicHeight]="true" [selectedIndex]="selectedIndex$ | async">
  <mat-tab label="Main Details">
    <app-internal-sales-proforma-invoice-create-main (updateMain)="onUpdateMain($event)" [draft$]="draft$" [credits$]="credits$"></app-internal-sales-proforma-invoice-create-main>
  </mat-tab>
  <mat-tab label="Account">
    <app-internal-sales-proforma-invoice-create-account
    [childSelectedIndex$]="childSelectedIndex$" [draft$]="draft$"
    (entity)="onCustomer()" (shipping)="onShippingAddress()" (billing)="onBillingAddress()" (shippingInfo)="onUpdateShippingInfo($event)" (billingInfo)="onUpdateBillingInfo($event)"></app-internal-sales-proforma-invoice-create-account>
  </mat-tab>
  <mat-tab label="Line Items">
    <app-internal-sales-proforma-invoice-create-line-items [localState]="localState$ | async" [draft$]="draft$" [rowData]="pns$ | async" (next)="onNextAdd()" (lineItem)="onLineItem($event)"></app-internal-sales-proforma-invoice-create-line-items>
  </mat-tab>
  <mat-tab label="Delivery Details">
    <app-internal-sales-proforma-invoice-create-delivery-details></app-internal-sales-proforma-invoice-create-delivery-details>
  </mat-tab>
  <mat-tab label="Settlement">
    <app-internal-sales-proforma-invoice-create-settlement [localState]="localState$ | async" [draft$]="draft$" [rowData]="settlement$ | async" [pns]="pns$ | async" (next)="onAddSettlement()"></app-internal-sales-proforma-invoice-create-settlement>
  </mat-tab>
  <mat-tab label="Department Hdr">
    <app-internal-sales-proforma-invoice-create-department [draft$]="draft$" (updateDepartment)="onUpdateDepartment($event)"></app-internal-sales-proforma-invoice-create-department>
  </mat-tab>
  <mat-tab label="Contra">
    <app-internal-sales-proforma-invoice-create-contra [localState]="localState$ | async" (next)="onAddContra()"></app-internal-sales-proforma-invoice-create-contra>
  </mat-tab>
  <!-- <mat-tab label="Attachments">
    <app-internal-sales-proforma-invoice-create-attachments [localState]="localState$ | async" (next)="onAddAttachments()"></app-internal-sales-proforma-invoice-create-attachments>
  </mat-tab> -->
</mat-tab-group>
