<div class="view-col-table no-tab" fxLayout="column">
  
  <mat-card-title class="column-title">
    <div fxLayout="row" fxLayoutAlign="space-between end">
      <div>
        <button #navBtn mat-button class="blg-button-icon" matTooltip="Back" type="button" (click)="onReturn()">
          <img [ngClass]="navBtn.disabled ? 'blg-button-disabled' : null" src="../../../assets/images/backbutton.png"
            alt="add" width="40px" height="40px">
        </button>
        <span>
          Upload The Data
        </span>
      </div>
      <button mat-raised-button color="primary" type="button" (click)="onAdd()">SUBMIT</button>
    </div>
  </mat-card-title>

  <form [formGroup]="form" #formDirectives="ngForm">
    <div fxLayout="column" class="view-col-forms">
      <div fxLayout="row wrap" fxFlexAlign="center" class="row">
        <div fxFlex.gt-sm="100" fxFlex="100" class="p-10">
          <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>Delimeter</mat-label>
            <mat-select placeholder="Delimeter" [formControl]="form.controls['delimeter']" (selectionChange)="updateDelimeter($event)">
              <mat-option *ngFor="let delimeter of Delimeters" [value]="delimeter.value">{{ delimeter.viewValue }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
    </div>
  </form>

  <div class="main-container">
    <div appDragDrop (dropEvent)="onChange($event.dataTransfer.files)" class="drop-zone">
      <input hidden #input type="file" accept=".csv" single (change)="onChange($event.target.files)" [disabled]="fileUploaded">
      <h3>
        Drag and drop your file anywhere or
      </h3>
      <label for="input" (click)="input.click()">Upload File</label>
    </div>
  </div>

  <div class="grid-container">
    <div *ngFor="let f of files$ | async" class="img-container">
      <button style="position: absolute;" mat-icon-button color="warn" type="button" (click)="onDeleteFile(f)">
        <mat-icon>delete</mat-icon>
      </button>
      <ng-container *ngIf="f.fileSRC === 'icon'; else preview">
        <mat-icon style="transform: translate(0px, 30px);" class="file-preview">description</mat-icon>
      </ng-container>
      <ng-template #preview>
        <img class="file-preview" [src]="f.fileSRC">
      </ng-template>
      <p class="file-name">{{f.fileAttributes.fileName}}</p>
    </div>
  </div>

  <div>
    <a (click)="openDialog()" download>
      <p><mark>Sample Format</mark></p>
    </a>
  </div>
  <!-- <div *ngIf="csvData && csvData.length > 0" class="table-container">
    <h3>CSV Data Preview</h3>
    <table class="custom-table"> 
      <thead>
        <tr>
          <th *ngFor="let key of getObjectKeys(csvData[0])">{{ key }}</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td *ngFor="let key of getObjectKeys(csvData[0])">{{ csvData[0][key] }}</td>
        </tr>
      </tbody>
    </table>
    <button mat-raised-button color="warn" type="button" (click)="onDeleteFile()">Delete</button>
  </div> -->
</div>